<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Events - Active Sphere</title>
    <style>
        /* Your existing CSS styles */
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="https://github.com/atharvakadu1/ActiveSphere/blob/main/logo1.jpg?raw=true" alt="Active Sphere Logo">
            </div>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="host.html">Host an Event</a></li>
                <li><a href="event1.html">Find Events</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <h1>Find Events</h1>

        <div class="search-container">
            <input type="text" placeholder="Search events...">
        </div>

        <div class="events-grid"></div>
    </main>

    <footer>
        <p>&copy; 2025 Active Sphere. All Rights Reserved.</p>
    </footer>

    <script>
      async function loadEvents() {
          const scriptUrl = "https://script.google.com/macros/s/AKfycbxONH4ZYOWajE22HZ1rS9Sf_RkkyHsxxaOclKUCDEhhJBrEDXgzzG-wjrfs8wMzhbsw/exec";
          const eventsGrid = document.querySelector(".events-grid");

          try {
              const response = await fetch(scriptUrl);
              const events = await response.json();
              
              eventsGrid.innerHTML = events.map(event => `
                  <div class="event-card">
                      <div class="event-header">
                          <h2 class="event-title">${event.title}</h2>
                          <span class="sport-tag">${event.sport}</span>
                      </div>
                      <div class="event-details">
                          <p><strong>Date:</strong> ${event.date}</p>
                          <p><strong>Time:</strong> ${event.time}</p>
                          <p><strong>Location:</strong> ${event.location}</p>
                          <p><strong>Spots:</strong> ${event.participants}</p>
                          <p><strong>Contact:</strong> ${event.contact}</p>
                          <p><strong>Description:</strong> ${event.description}</p>
                      </div>
                      <button class="join-button" onclick="joinEvent()">Join Event</button>
                      <button class="remove-button" onclick="removeEvent('${event.title}')">Remove Event</button>
                  </div>
              `).join("");
              
          } catch (error) {
              eventsGrid.innerHTML = "Failed to load events.";
          }
      }

      async function removeEvent(title) {
          const scriptUrl = "https://script.google.com/macros/s/AKfycbxONH4ZYOWajE22HZ1rS9Sf_RkkyHsxxaOclKUCDEhhJBrEDXgzzG-wjrfs8wMzhbsw/exec";
          try {
              const response = await fetch(scriptUrl, {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                  },
                  body: JSON.stringify({ title }),
              });
              const result = await response.json();
              if (result.success) {
                  loadEvents(); // Reload events after removal
              }
          } catch (error) {
              console.error('Error removing event:', error);
          }
      }

      function joinEvent() {
          window.open("https://chat.whatsapp.com/JACrnM0SZFTBtfz1oBK18H", "_blank");
      }

      window.onload = loadEvents;
    </script>
</body>
</html>